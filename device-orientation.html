<link rel="import" href="bower_components/polymer/polymer.html">

<polymer-element name="device-orientation" attributes="active">
  <script>
    Polymer({
      publish: {
        /**
         * The euler angle in degrees of the device from the standard Z axis.
         */
        alpha: {
          value: null,
          reflect: true
        },

        /**
         * The euler angle in degrees of the device from the standard X axis.
         */
        beta: {
          value: null,
          reflect: true
        },

        /**
         * The euler angle in degrees of the device from the standard Y axis.
         */
        gamma: {
          value: null,
          reflect: true
        }
      },

      /**
       * If true, the alpha, beta and gamma and properties updates as
       * the device changes orientation.
       */
      active: false,

      activeChanged: function() {
        var callback = this.onOrientationChange.bind(this);
        if (this.active) {
          window.addEventListener('deviceorientation', callback);
        } else {
          window.removeEventListener('deviceorientation', callback);
        }
      },

      onOrientationChange: function(event) {
        this.alpha = event.alpha;
        this.beta = event.beta;
        this.gamma = event.gamma;

        this.fire('change', {
          alpha: this.alpha,
          beta: this.beta.
            gamma = this.gamma
        });
      }
    });
  </script>
</polymer-element>
